#!/usr/bin/env bash

source "$(dirname "$0")"/pkg_manager.sh

if script-pkg-missing "$@"; then
  pkg_install "$@" || exit 1
fi

for pkg in "$@"; do
  # Secondary check to handle states where the package manager doesn't register an error
  if ! pkg_search_installed "$pkg" &>/dev/null; then
    echo -e "\033[31mError: Package '$pkg' did not install\033[0m" >&2
    exit 1
  fi
done

exit 0
