#!/usr/bin/env bash

set -e
source "$(dirname "$0")"/pkg_manager.sh

# Used in package emergencies if a bad package has been pushed and we can't revoke.
# Requires manually installing the good package using sudo pacman -U <url>
ignored_packages=$(script-pkg-ignored)

# Update AUR packages if any are installed
if pacman -Qem >/dev/null; then
  if script-pkg-aur-accessible; then
    echo -e "\e[32m\nUpdate AUR packages\e[0m"
    yay -Sua --noconfirm --ignore "$ignored_packages"
  else
    echo -e "\e[31m\nAUR is unavailable (so skipping updates)\e[0m"
  fi
fi
